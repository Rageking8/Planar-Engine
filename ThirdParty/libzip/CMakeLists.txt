message(STATUS "Fetching libzip")

set(ENABLE_COMMONCRYPTO OFF CACHE BOOL "" FORCE)
set(ENABLE_GNUTLS OFF CACHE BOOL "" FORCE)
set(ENABLE_MBEDTLS OFF CACHE BOOL "" FORCE)
set(ENABLE_OPENSSL OFF CACHE BOOL "" FORCE)

set(ENABLE_BZIP2 OFF CACHE BOOL "" FORCE)
set(ENABLE_LZMA OFF CACHE BOOL "" FORCE)
set(ENABLE_ZSTD OFF CACHE BOOL "" FORCE)

set(BUILD_TOOLS OFF CACHE BOOL "" FORCE)
set(BUILD_REGRESS  OFF CACHE BOOL "" FORCE)
set(BUILD_EXAMPLES OFF CACHE BOOL "" FORCE)
set(BUILD_DOC OFF CACHE BOOL "" FORCE)

set(LIBZIP_DO_INSTALL OFF CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(libzip)

set(LIBZIP_HEADERS_LIST
    lib/zip.h
)
list(TRANSFORM LIBZIP_HEADERS_LIST PREPEND ${libzip_SOURCE_DIR}/)
file(COPY ${LIBZIP_HEADERS_LIST} DESTINATION
    ${PLANAR_EXTERNAL_THIRD_PARTY_INCLUDE_DIR}/libzip
)

copy_single_source(
    ${libzip_BINARY_DIR}/zipconf.h
    ${PLANAR_EXTERNAL_INCLUDE_DIR}
)
